<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ESP32 Wi-Fi Configurator</title>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('connectButton').addEventListener('click', async function() {
        try {
            const {value: ssid} = document.getElementById('ssid');
            const {value: password} = document.getElementById('password');
            const port = await navigator.serial.requestPort({ filters: [] });
            await port.open({ baudRate: 115200 });
            const encoder = new TextEncoder();
            const command = `AT+CONFIG=wifi,ssid,${ssid};password,${password}\n`;
            const writeBuffer = encoder.encode(command);
            console.log('Sending command:', command);
            await port.write(writeBuffer);
            console.log('Wi-Fi configuration command sent successfully.');
            // Optionally, add a listener for the 'datareceived' event to read responses from the ESP32
            port.on('datareceived', event => {
                console.log('Received data:', new Uint8Array(event.data));
            });
        } catch (error) {
            console.error('Error occurred:', error);
        }
    });
});
</script>
</head>
<body>
<h1>ESP32 Wi-Fi Configurator</h1>
<form>
    <label for="ssid">SSID:</label>
    <input type="text" id="ssid" name="ssid" required><br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br>
    <button type="button" id="connectButton">Connect and Configure</button>
</form>
</body>
</html>
